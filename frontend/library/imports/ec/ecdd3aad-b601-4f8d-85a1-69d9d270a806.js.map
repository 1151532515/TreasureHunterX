{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\FindingPlayer.js"],"names":["cc","Class","extends","Component","properties","firstPlayerInfoNode","type","Node","default","secondPlayerInfoNode","findingAnimNode","onLoad","init","active","playersInfoNode","Object","assign","exitBtnOnClick","evt","window","closeWSConnection","clearBoundRoomIdInBothVolatileAndPersistentStorage","sys","localStorage","removeItem","director","loadScene","updatePlayersInfo","players","i","playerInfo","playerInfoNode","joinIndex","nameNode","getChildByName","getComponent","Label","string","constants","PLAYER_NAME"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACXC,yBAAqB;AAClBC,YAAMN,GAAGO,IADS;AAElBC,eAAS;AAFS,KADV;AAKVC,0BAAsB;AACpBH,YAAMN,GAAGO,IADW;AAEpBC,eAAS;AAFW,KALZ;AASVE,qBAAiB;AACfJ,YAAMN,GAAGO,IADM;AAEfC,eAAS;AAFM;AATP,GAHL;;AAkBP;;AAEAG,QApBO,oBAoBE,CACR,CArBM;AAsBPC,MAtBO,kBAsBA;AACL,SAAKP,mBAAL,CAAyBQ,MAAzB,GAAkC,KAAlC;AACA,SAAKJ,oBAAL,CAA0BI,MAA1B,GAAmC,KAAnC;AACA,SAAKC,eAAL,GAAuB,EAAvB;AACAC,WAAOC,MAAP,CAAc,KAAKF,eAAnB,EAAoC,EAAC,GAAG,KAAKT,mBAAT,EAApC;AACAU,WAAOC,MAAP,CAAc,KAAKF,eAAnB,EAAoC,EAAC,GAAG,KAAKL,oBAAT,EAApC;AACA,SAAKC,eAAL,CAAqBG,MAArB,GAA8B,IAA9B;AACD,GA7BM;AA8BPI,gBA9BO,0BA8BQC,GA9BR,EA8Ba;AAClBC,WAAOC,iBAAP;AACAD,WAAOE,kDAAP;AACArB,OAAGsB,GAAH,CAAOC,YAAP,CAAoBC,UAApB,CAA+B,YAA/B;AACAxB,OAAGyB,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACD,GAnCM;AAoCPC,mBApCO,6BAoCWC,OApCX,EAoCoB;AACzB,QAAI,CAACA,OAAL,EAAc;AACd,SAAK,IAAIC,CAAT,IAAcD,OAAd,EAAuB;AACrB,UAAME,aAAaF,QAAQC,CAAR,CAAnB;AACA,UAAME,iBAAiB,KAAKjB,eAAL,CAAqBgB,WAAWE,SAAhC,CAAvB;AACA,UAAMC,WAAWF,eAAeG,cAAf,CAA8B,MAA9B,CAAjB;AACAD,eAASE,YAAT,CAAsBnC,GAAGoC,KAAzB,EAAgCC,MAAhC,GAAyCC,UAAUC,WAAV,CAAsBT,WAAWE,SAAjC,CAAzC;AACAD,qBAAelB,MAAf,GAAwB,IAAxB;AACA,UAAI,KAAKiB,WAAWE,SAApB,EAA+B;AAC7B,aAAKtB,eAAL,CAAqBG,MAArB,GAA8B,KAA9B;AACD;AACF;AACF;AAhDM,CAAT","file":"FindingPlayer.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n   firstPlayerInfoNode: {\r\n      type: cc.Node,\r\n      default: null\r\n    },\r\n    secondPlayerInfoNode: {\r\n      type: cc.Node,\r\n      default: null\r\n    },\r\n    findingAnimNode: {\r\n      type: cc.Node,\r\n      default: null\r\n    },\r\n  },\r\n\r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad() {\r\n  },\r\n  init() {\r\n    this.firstPlayerInfoNode.active = false;\r\n    this.secondPlayerInfoNode.active = false;\r\n    this.playersInfoNode = {};\r\n    Object.assign(this.playersInfoNode, {1: this.firstPlayerInfoNode});\r\n    Object.assign(this.playersInfoNode, {2: this.secondPlayerInfoNode});\r\n    this.findingAnimNode.active = true;\r\n  },\r\n  exitBtnOnClick(evt) {\r\n    window.closeWSConnection();\r\n    window.clearBoundRoomIdInBothVolatileAndPersistentStorage();\r\n    cc.sys.localStorage.removeItem('selfPlayer');\r\n    cc.director.loadScene('login');\r\n  },\r\n  updatePlayersInfo(players) {\r\n    if (!players) return;\r\n    for (let i in players) {\r\n      const playerInfo = players[i];\r\n      const playerInfoNode = this.playersInfoNode[playerInfo.joinIndex];\r\n      const nameNode = playerInfoNode.getChildByName(\"name\");\r\n      nameNode.getComponent(cc.Label).string = constants.PLAYER_NAME[playerInfo.joinIndex]; \r\n      playerInfoNode.active = true;\r\n      if (2 == playerInfo.joinIndex) {\r\n        this.findingAnimNode.active = false;\r\n      }\r\n    }\r\n  },\r\n});\r\n"]}