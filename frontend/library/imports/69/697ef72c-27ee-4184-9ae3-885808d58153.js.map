{"version":3,"sources":["../../../../assets/scripts/assets/scripts/TreasurePickedUpAnim.js"],"names":["cc","Class","extends","Component","properties","pickedUpAnimNode","type","Node","default","durationMillis","update","dt","changingNode","elapsedMillis","Date","now","startedAtMillis","console","log","node","destroy","halfDurationMillis","posDiff","v2","yIncreaseSpeed","setPosition","position","add","scale","scaleIncreaseSpeed","yDecreaseSpeed","sub","opacity","opacityDegradeSpeed","onLoad","g","self","gY"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,sBAAkB;AAChBC,YAAMN,GAAGO,IADO;AAEhBC,eAAS;AAFO,KADR;AAKVC,oBAAgB;AACdD,eAAS;AADK;AALN,GAHL;;AAaP;AACAE,QAdO,kBAcCC,EAdD,EAcK;AACV,QAAMC,eAAe,KAAKP,gBAA1B;AACA,QAAMQ,gBAAgBC,KAAKC,GAAL,KAAa,KAAKC,eAAxC;AACAC,YAAQC,GAAR,CAAYL,aAAZ;AACA,QAAIA,gBAAgB,KAAKJ,cAAzB,EAAyC;AACvC,WAAKU,IAAL,CAAUC,OAAV;AACA;AACD;AACD,QAAIP,iBAAiB,KAAKQ,kBAA1B,EAA8C;AAC5C,UAAIC,UAAUtB,GAAGuB,EAAH,CAAM,CAAN,EAASZ,KAAK,KAAKa,cAAnB,CAAd;AACAZ,mBAAaa,WAAb,CAAyBb,aAAac,QAAb,CAAsBC,GAAtB,CAA0BL,OAA1B,CAAzB;AACAV,mBAAagB,KAAb,IAAuB,KAAKC,kBAAL,GAAwBlB,EAA/C;AACD,KAJD,MAIM;AACJ,UAAIW,WAAUtB,GAAGuB,EAAH,CAAM,CAAN,EAASZ,KAAK,KAAKmB,cAAnB,CAAd;AACAlB,mBAAaa,WAAb,CAAyBb,aAAac,QAAb,CAAsBK,GAAtB,CAA0BT,QAA1B,CAAzB;AACAV,mBAAaoB,OAAb,IAAwBrB,KAAK,KAAKsB,mBAAlC;AACD;AACF,GA/BM;AAiCPC,QAjCO,oBAiCE;AACP,SAAKC,CAAL,GAASnC,GAAGuB,EAAH,CAAM,CAAN,EAASa,KAAKC,EAAd,CAAT;AACA,SAAKhB,kBAAL,GAA2B,MAAI,KAAKZ,cAApC;AACA,SAAKwB,mBAAL,GAA4B,MAAI,IAAJ,GAAS,KAAKZ,kBAA1C;AACA,SAAKG,cAAL,GAAuB,MAAI,IAAJ,GAAS,KAAKH,kBAArC;AACA,SAAKQ,kBAAL,GAA2B,IAAI,IAAJ,GAAS,KAAKR,kBAAzC;AACA,SAAKhB,gBAAL,CAAsBuB,KAAtB,GAA8B,CAA9B;AACA,SAAKZ,eAAL,GAAuBF,KAAKC,GAAL,EAAvB;AACA,SAAKe,cAAL,GAAuB,KAAG,IAAH,GAAQ,KAAKT,kBAApC;AACD;AA1CM,CAAT","file":"TreasurePickedUpAnim.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    pickedUpAnimNode: {\n      type: cc.Node,\n      default: null\n    },\n    durationMillis: {\n      default: 4000,\n    },\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n  update (dt) {\n    const changingNode = this.pickedUpAnimNode; \n    const elapsedMillis = Date.now() - this.startedAtMillis; \n    console.log(elapsedMillis);\n    if (elapsedMillis > this.durationMillis) {\n      this.node.destroy();\n      return;\n    }\n    if (elapsedMillis >= this.halfDurationMillis) {\n      let posDiff = cc.v2(0, dt * this.yIncreaseSpeed);\n      changingNode.setPosition(changingNode.position.add(posDiff));\n      changingNode.scale += (this.scaleIncreaseSpeed*dt); \n    }else {\n      let posDiff = cc.v2(0, dt * this.yDecreaseSpeed);     \n      changingNode.setPosition(changingNode.position.sub(posDiff));\n      changingNode.opacity -= dt * this.opacityDegradeSpeed;\n    }\n  },\n\n  onLoad() {\n    this.g = cc.v2(0, self.gY);\n    this.halfDurationMillis = (0.5*this.durationMillis);\n    this.opacityDegradeSpeed = (255*1000/this.halfDurationMillis);\n    this.yIncreaseSpeed = (100*1000/this.halfDurationMillis);\n    this.scaleIncreaseSpeed = (2 * 1000/this.halfDurationMillis);\n    this.pickedUpAnimNode.scale = 0; \n    this.startedAtMillis = Date.now();\n    this.yDecreaseSpeed = (30*1000/this.halfDurationMillis);\n  }\n});\n"]}