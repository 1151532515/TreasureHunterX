{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\TreasurePickedUpAnim.js"],"names":["cc","Class","extends","Component","properties","pickedUpAnimNode","type","Node","default","durationMillis","binglingAnimNode","binglingAnimDurationMillis","binglingAnimFinish","node","destroy","update","dt","changingNode","elapsedMillis","Date","now","startedAtMillis","active","firstDurationMillis","posDiff","v2","yIncreaseSpeed","setPosition","position","add","scale","scaleIncreaseSpeed","xIncreaseSpeed","yDecreaseSpeed","opacity","opacityDegradeSpeed","onLoad","scondDurationMillis"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,sBAAkB;AAChBC,YAAMN,GAAGO,IADO;AAEhBC,eAAS;AAFO,KADR;AAKVC,oBAAgB;AACdD,eAAS;AADK,KALN;AAQVE,sBAAkB;AAChBJ,YAAMN,GAAGO,IADO;AAEhBC,eAAS;AAFO,KARR;AAYVG,gCAA4B;AAC1BH,eAAS;AADiB;AAZlB,GAHL;;AAoBPI,oBApBO,gCAoBc;AACnB,SAAKC,IAAL,CAAUC,OAAV;AACD,GAtBM;;;AAyBP;AACAC,QA1BO,kBA0BCC,EA1BD,EA0BK;AACV,QAAMC,eAAe,KAAKZ,gBAA1B;AACA,QAAMa,gBAAgBC,KAAKC,GAAL,KAAa,KAAKC,eAAxC;AACA,QAAGH,gBAAgB,KAAKP,0BAArB,IAAmD,KAAKD,gBAAL,CAAsBY,MAA5E,EAAoF;AAClF,WAAKZ,gBAAL,CAAsBY,MAAtB,GAA+B,KAA/B;AACD;AACD,QAAIJ,gBAAgB,KAAKT,cAAzB,EAAyC;AACvC,WAAKI,IAAL,CAAUC,OAAV;AACA;AACD;AACD,QAAII,iBAAiB,KAAKK,mBAA1B,EAA+C;AAC7C,UAAIC,UAAUxB,GAAGyB,EAAH,CAAM,CAAN,EAAST,KAAK,KAAKU,cAAnB,CAAd;AACAT,mBAAaU,WAAb,CAAyBV,aAAaW,QAAb,CAAsBC,GAAtB,CAA0BL,OAA1B,CAAzB;AACAP,mBAAaa,KAAb,IAAuB,KAAKC,kBAAL,GAAwBf,EAA/C;AACD,KAJD,MAIO;AACL,UAAIQ,WAAUxB,GAAGyB,EAAH,CAAMT,KAAK,KAAKgB,cAAhB,EAAmC,CAAC,CAAD,GAAIhB,EAAJ,GAAS,KAAKiB,cAAjD,CAAd;AACAhB,mBAAaU,WAAb,CAAyBV,aAAaW,QAAb,CAAsBC,GAAtB,CAA0BL,QAA1B,CAAzB;AACAP,mBAAaiB,OAAb,IAAwBlB,KAAK,KAAKmB,mBAAlC;AACD;AACF,GA7CM;AA+CPC,QA/CO,oBA+CE;AACP,SAAK/B,gBAAL,CAAsByB,KAAtB,GAA8B,CAA9B;AACA,SAAKT,eAAL,GAAuBF,KAAKC,GAAL,EAAvB;;AAEA,SAAKG,mBAAL,GAA4B,MAAI,KAAKd,cAArC;AACA,SAAKiB,cAAL,GAAuB,MAAK,IAAL,GAAU,KAAKH,mBAAtC;AACA,SAAKQ,kBAAL,GAA2B,IAAI,IAAJ,GAAS,KAAKR,mBAAzC;;AAEA,SAAKc,mBAAL,GAA4B,MAAM,KAAK5B,cAAvC;AACA,SAAK0B,mBAAL,GAA4B,MAAI,IAAJ,GAAS,KAAKE,mBAA1C;AACA,SAAKJ,cAAL,GAAuB,KAAG,IAAH,GAAQ,KAAKI,mBAApC;AACA,SAAKL,cAAL,GAAuB,KAAG,IAAH,GAAQ,KAAKK,mBAApC;AACD;AA3DM,CAAT","file":"TreasurePickedUpAnim.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    pickedUpAnimNode: {\r\n      type: cc.Node,\r\n      default: null\r\n    },\r\n    durationMillis: {\r\n      default: 0 \r\n    },\r\n    binglingAnimNode: {\r\n      type: cc.Node,\r\n      default: null\r\n    },\r\n    binglingAnimDurationMillis: {\r\n      default: 0\r\n    }\r\n  },\r\n \r\n  binglingAnimFinish() {\r\n    this.node.destroy();\r\n  },\r\n\r\n  \r\n  // LIFE-CYCLE CALLBACKS:\r\n  update (dt) {\r\n    const changingNode = this.pickedUpAnimNode; \r\n    const elapsedMillis = Date.now() - this.startedAtMillis; \r\n    if(elapsedMillis > this.binglingAnimDurationMillis && this.binglingAnimNode.active) {\r\n      this.binglingAnimNode.active = false;\r\n    }\r\n    if (elapsedMillis > this.durationMillis) {\r\n      this.node.destroy();\r\n      return;\r\n    }\r\n    if (elapsedMillis <= this.firstDurationMillis) {\r\n      let posDiff = cc.v2(0, dt * this.yIncreaseSpeed);\r\n      changingNode.setPosition(changingNode.position.add(posDiff));\r\n      changingNode.scale += (this.scaleIncreaseSpeed*dt); \r\n    } else {\r\n      let posDiff = cc.v2(dt * this.xIncreaseSpeed , ( -1 *dt * this.yDecreaseSpeed));     \r\n      changingNode.setPosition(changingNode.position.add(posDiff));\r\n      changingNode.opacity -= dt * this.opacityDegradeSpeed;\r\n    }\r\n  },\r\n\r\n  onLoad() {\r\n    this.pickedUpAnimNode.scale = 0; \r\n    this.startedAtMillis = Date.now();\r\n\r\n    this.firstDurationMillis = (0.8*this.durationMillis);\r\n    this.yIncreaseSpeed = (200 *1000/this.firstDurationMillis);\r\n    this.scaleIncreaseSpeed = (2 * 1000/this.firstDurationMillis);\r\n\r\n    this.scondDurationMillis = (0.2 * this.durationMillis );\r\n    this.opacityDegradeSpeed = (255*1000/this.scondDurationMillis);\r\n    this.yDecreaseSpeed = (30*1000/this.scondDurationMillis);\r\n    this.xIncreaseSpeed = (20*1000/this.scondDurationMillis);\r\n  }\r\n});\r\n"]}