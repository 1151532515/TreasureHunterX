{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Treasure.js"],"names":["cc","Class","extends","Component","properties","pickedUpanimPrefab","type","Prefab","default","animNode","Node","setData","treasureInfo","self","score","spriteComponent","node","getComponent","Sprite","loader","loadRes","SpriteFrame","err","frame","warn","spriteFrame","binglingAnimComp","Animation","play","playPickedUpAnimAndDestroy","parentNode","parent","instantiate","animScriptIns","setPosition","position","safelyAddChild","setLocalZOrder","destroy","start"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,wBAAoB;AAClBC,YAAMN,GAAGO,MADS;AAElBC,eAAS;AAFS,KADV;AAKVC,cAAU;AACRH,YAAMN,GAAGU,IADD;AAERF,eAAS;AAFD;;AALA,GAHL;;AAePG,SAfO,mBAeEC,YAfF,EAegB;AACrB,QAAMC,OAAO,IAAb;AACA,SAAKC,KAAL,GAAaF,aAAaE,KAAb,GAAqBF,aAAaE,KAAlC,GAA0C,GAAvD;AACA,SAAKR,IAAL,GAAYM,aAAaN,IAAb,GAAoBM,aAAaN,IAAjC,GAAwC,CAApD;AACA,SAAKM,YAAL,GAAoBA,YAApB;AACA,QAAMG,kBAAkB,KAAKC,IAAL,CAAUC,YAAV,CAAuBjB,GAAGkB,MAA1B,CAAxB;AACA;AACAlB,OAAGmB,MAAH,CAAUC,OAAV,CAAkB,wBAAuB,KAAKd,IAA9C,EAAoDN,GAAGqB,WAAvD,EAAoE,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AACxF,UAAGD,GAAH,EAAO;AACLtB,WAAGwB,IAAH,CAAQF,GAAR;AACA;AACD;AACDP,sBAAgBU,WAAhB,GAA8BF,KAA9B;AACD,KAND;AAOA,QAAMG,mBAAmB,KAAKjB,QAAL,CAAcQ,YAAd,CAA2BjB,GAAG2B,SAA9B,CAAzB;AACAD,qBAAiBE,IAAjB,CAAsB,KAAKtB,IAA3B;AACD,GA/BM;AAiCPuB,4BAjCO,wCAiCsB;AAC3B,QAAMhB,OAAO,IAAb;AACA,QAAMiB,aAAajB,KAAKG,IAAL,CAAUe,MAA7B;AACA,QAAI,CAACD,UAAL,EAAiB;AACjB,QAAI,CAACjB,KAAKR,kBAAV,EAA8B;AAC9B,QAAMI,WAAWT,GAAGgC,WAAH,CAAenB,KAAKR,kBAApB,CAAjB;AACA,QAAM4B,gBAAgBxB,SAASQ,YAAT,CAAsB,sBAAtB,CAAtB;AACAgB,kBAActB,OAAd,CAAsB,KAAKC,YAA3B;AACAH,aAASyB,WAAT,CAAqBrB,KAAKG,IAAL,CAAUmB,QAA/B;AACAC,mBAAeN,UAAf,EAA2BrB,QAA3B;AACA4B,mBAAe5B,QAAf,EAAyB,GAAzB;AACA,SAAKO,IAAL,CAAUsB,OAAV;AACD,GA7CM;AA+CPC,OA/CO,mBA+CC,CAAE;AA/CH,CAAT","file":"Treasure.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    pickedUpanimPrefab: {\r\n      type: cc.Prefab,\r\n      default: null\r\n    },\r\n    animNode: {\r\n      type: cc.Node,\r\n      default: null\r\n    }\r\n    \r\n  },\r\n\r\n  setData (treasureInfo) {\r\n    const self = this;\r\n    this.score = treasureInfo.score ? treasureInfo.score : 100 ;\r\n    this.type = treasureInfo.type ? treasureInfo.type : 1;\r\n    this.treasureInfo = treasureInfo;\r\n    const spriteComponent = this.node.getComponent(cc.Sprite);\r\n    //hardcode treasurePNG's path.\r\n    cc.loader.loadRes(\"textures/treasures/\"+ this.type, cc.SpriteFrame, function (err, frame) {\r\n      if(err){\r\n        cc.warn(err);\r\n        return;\r\n      }\r\n      spriteComponent.spriteFrame = frame; \r\n    })\r\n    const binglingAnimComp = this.animNode.getComponent(cc.Animation);\r\n    binglingAnimComp.play(this.type);\r\n  },\r\n\r\n  playPickedUpAnimAndDestroy() {\r\n    const self = this;\r\n    const parentNode = self.node.parent;\r\n    if (!parentNode) return;\r\n    if (!self.pickedUpanimPrefab) return;\r\n    const animNode = cc.instantiate(self.pickedUpanimPrefab); \r\n    const animScriptIns = animNode.getComponent(\"TreasurePickedUpAnim\");\r\n    animScriptIns.setData(this.treasureInfo);\r\n    animNode.setPosition(self.node.position);  \r\n    safelyAddChild(parentNode, animNode);\r\n    setLocalZOrder(animNode, 999);\r\n    this.node.destroy();\r\n  },\r\n\r\n  start() {},\r\n})\r\n"]}