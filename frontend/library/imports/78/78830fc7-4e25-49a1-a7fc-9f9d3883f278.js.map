{"version":3,"sources":["../../../../assets/scripts/assets/scripts/CameraTracker.js"],"names":["cc","Class","extends","Component","properties","mapNode","type","Node","default","start","update","dt","self","canvasNode","node","getNumberOfRunningActions","mapScriptIns","getComponent","selfPlayerNode","selfPlayerPosDiffInMapNode","position","canvasNodeScale","getScale","targetPos","mul","x","y","runAction","moveTo"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAS;AACLC,kBAAMN,GAAGO,IADJ;AAELC,qBAAS;AAFJ;AADD,KAHP;;AAUL;;AAEAC,SAZK,mBAYG,CAAE,CAZL;AAcLC,UAdK,kBAcEC,EAdF,EAcM;AACT,YAAMC,OAAO,IAAb;AACA,YAAMC,aAAaD,KAAKE,IAAxB;AACA,YAAMT,UAAUO,KAAKP,OAArB;;AAEA,YAAI,IAAIA,QAAQU,yBAAR,EAAR,EAA6C;AAC3C;AACD;;AAED,YAAMC,eAAeJ,KAAKP,OAAL,CAAaY,YAAb,CAA0B,KAA1B,CAArB;AACA,YAAMC,iBAAiBF,aAAaE,cAApC;AACA,YAAI,QAAQA,cAAZ,EAA4B;;AAE5B,YAAMC,6BAA6BD,eAAeE,QAAlD;AACA,YAAMC,kBAAkBR,WAAWS,QAAX,EAAxB;AACA,YAAMC,YAAYJ,2BAA2BK,GAA3B,CAA+B,CAAC,CAAhC,CAAlB;AACA,YAAID,UAAUE,CAAV,IAAepB,QAAQe,QAAR,CAAiBK,CAAhC,IAAqCF,UAAUG,CAAV,IAAerB,QAAQe,QAAR,CAAiBM,CAAzE,EAA4E;AAC5ErB,gBAAQsB,SAAR,CAAkB3B,GAAG4B,MAAH,CAAU,GAAV,CAAc,2BAAd,EAA2CL,SAA3C,CAAlB;AACD;AAhCI,CAAT","file":"CameraTracker.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        mapNode: {\n            type: cc.Node,\n            default: null\n        }\n    },\n\n    // onLoad () {},\n\n    start() {},\n\n    update(dt) {\n      const self = this;\n      const canvasNode = self.node;\n      const mapNode = self.mapNode;\n  \n      if (0 < mapNode.getNumberOfRunningActions()) {\n        return;\n      }\n\n      const mapScriptIns = self.mapNode.getComponent(\"Map\");\n      const selfPlayerNode = mapScriptIns.selfPlayerNode;\n      if (null == selfPlayerNode) return;\n\n      const selfPlayerPosDiffInMapNode = selfPlayerNode.position;\n      const canvasNodeScale = canvasNode.getScale();\n      const targetPos = selfPlayerPosDiffInMapNode.mul(-1);  \n      if (targetPos.x == mapNode.position.x && targetPos.y == mapNode.position.y) return;\n      mapNode.runAction(cc.moveTo(0.2 /* hardcoded, in seconds */, targetPos));\n    }\n});\n\n"]}