{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\CameraTracker.js"],"names":["cc","Class","extends","Component","properties","mapNode","type","Node","default","start","update","dt","self","canvasNode","node","getNumberOfRunningActions","mapScriptIns","getComponent","selfPlayerNode","selfPlayerPosDiffInMapNode","position","canvasNodeScale","scale","targetPos","mul","x","y","runAction","moveTo"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAS;AACLC,kBAAMN,GAAGO,IADJ;AAELC,qBAAS;AAFJ;AADD,KAHP;;AAUL;;AAEAC,SAZK,mBAYG,CAAE,CAZL;AAcLC,UAdK,kBAcEC,EAdF,EAcM;AACT,YAAMC,OAAO,IAAb;AACA,YAAMC,aAAaD,KAAKE,IAAxB;AACA,YAAMT,UAAUO,KAAKP,OAArB;;AAEA,YAAI,IAAIA,QAAQU,yBAAR,EAAR,EAA6C;AAC3C;AACD;;AAED,YAAMC,eAAeJ,KAAKP,OAAL,CAAaY,YAAb,CAA0B,KAA1B,CAArB;AACA,YAAMC,iBAAiBF,aAAaE,cAApC;AACA,YAAI,QAAQA,cAAZ,EAA4B;;AAE5B,YAAMC,6BAA6BD,eAAeE,QAAlD;AACA,YAAMC,kBAAkBR,WAAWS,KAAnC;AACA,YAAMC,YAAYJ,2BAA2BK,GAA3B,CAA+B,CAAC,CAAhC,CAAlB;AACA,YAAID,UAAUE,CAAV,IAAepB,QAAQe,QAAR,CAAiBK,CAAhC,IAAqCF,UAAUG,CAAV,IAAerB,QAAQe,QAAR,CAAiBM,CAAzE,EAA4E;AAC5ErB,gBAAQsB,SAAR,CAAkB3B,GAAG4B,MAAH,CAAU,GAAV,CAAc,2BAAd,EAA2CL,SAA3C,CAAlB;AACD;AAhCI,CAAT","file":"CameraTracker.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        mapNode: {\r\n            type: cc.Node,\r\n            default: null\r\n        }\r\n    },\r\n\r\n    // onLoad () {},\r\n\r\n    start() {},\r\n\r\n    update(dt) {\r\n      const self = this;\r\n      const canvasNode = self.node;\r\n      const mapNode = self.mapNode;\r\n  \r\n      if (0 < mapNode.getNumberOfRunningActions()) {\r\n        return;\r\n      }\r\n\r\n      const mapScriptIns = self.mapNode.getComponent(\"Map\");\r\n      const selfPlayerNode = mapScriptIns.selfPlayerNode;\r\n      if (null == selfPlayerNode) return;\r\n\r\n      const selfPlayerPosDiffInMapNode = selfPlayerNode.position;\r\n      const canvasNodeScale = canvasNode.scale;\r\n      const targetPos = selfPlayerPosDiffInMapNode.mul(-1);  \r\n      if (targetPos.x == mapNode.position.x && targetPos.y == mapNode.position.y) return;\r\n      mapNode.runAction(cc.moveTo(0.2 /* hardcoded, in seconds */, targetPos));\r\n    }\r\n});\r\n\r\n"]}